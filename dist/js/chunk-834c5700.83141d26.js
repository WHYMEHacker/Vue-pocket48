(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-834c5700"],{"0737":function(t,e,i){},"0a49":function(t,e,i){var s=i("9b43"),r=i("626a"),a=i("4bf8"),n=i("9def"),o=i("cd1c");t.exports=function(t,e){var i=1==t,c=2==t,l=3==t,p=4==t,h=6==t,u=5==t||h,d=e||o;return function(e,o,v){for(var f,g,m=a(e),b=r(m),y=s(o,v,3),w=n(b.length),L=0,_=i?d(e,w):c?d(e,0):void 0;w>L;L++)if((u||L in b)&&(f=b[L],g=y(f,L,m),t))if(i)_[L]=g;else if(g)switch(t){case 3:return!0;case 5:return f;case 6:return L;case 2:_.push(f)}else if(p)return!1;return h?-1:l||p?p:_}}},1169:function(t,e,i){var s=i("2d95");t.exports=Array.isArray||function(t){return"Array"==s(t)}},"20d6":function(t,e,i){"use strict";var s=i("5ca1"),r=i("0a49")(6),a="findIndex",n=!0;a in[]&&Array(1)[a](function(){n=!1}),s(s.P+s.F*n,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")(a)},3178:function(t,e,i){},5403:function(t,e,i){},"54ee":function(t,e,i){"use strict";var s=i("e7bd"),r=i.n(s);r.a},5724:function(t,e,i){"use strict";var s=i("ca06"),r=i.n(s);r.a},"6cac":function(t,e,i){},"7cb9":function(t,e,i){"use strict";var s=i("6cac"),r=i.n(s);r.a},8050:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-info"},[t.info.user.avatar?i("div",{staticClass:"popup-info"},[i("p",{staticStyle:{color:"white"}},[t._v("·")]),i("img",{staticClass:"juju-avatar",attrs:{src:t._f("picPathFormat")(t.info.user.avatar),alt:""},on:{click:t.goToUserInfo}}),i("p",{staticClass:"name"},[t._v("\n      "+t._s(t.info.user.nickName)+"\n      "),i("el-tag",{attrs:{size:"mini"}},[t._v(t._s("lv."+t.info.user.level))])],1)]):t._e()])},r=[],a={props:["id","info"],methods:{goToUserInfo:function(){this.$router.push({name:"userinfo",params:{id:this.info.user.userId}})}}},n=a,o=(i("54ee"),i("2877")),c=Object(o["a"])(n,s,r,!1,null,"294d4de8",null);e["a"]=c.exports},"853d":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"live-page-container my-card"},[i("div",{staticClass:"info-container"},[t.liveInfo.picPath?i("div",{staticClass:"live-info",style:{width:t.rect.width}},[i("div",{staticClass:"live-title"},[i("span",{staticClass:"sub-title",domProps:{innerHTML:t._s(t.liveInfo.subTitle)}}),i("br"),i("span",{staticClass:"main-title",domProps:{innerHTML:t._s(t.liveInfo.title)}})]),i("div",{staticClass:"live-time",domProps:{innerHTML:t._s(new Date(t.liveInfo.startTime).toLocaleDateString())}}),0===t.type?i("div",{staticClass:"comment-info"},[i("i",{staticClass:"el-icon-view"}),i("span",{staticClass:"praise-count",domProps:{innerHTML:t._s(t.count.praise)}}),i("i",{staticClass:"el-icon-edit-outline"}),i("span",{staticClass:"comment-count",domProps:{innerHTML:t._s(t.count.comment)}}),i("i",{staticClass:"el-icon-share"}),i("span",{staticClass:"share-count",domProps:{innerHTML:t._s(t.count.share)}})]):t._e()]):t._e()]),1===t.type&&t.picPath?i("a",{attrs:{href:"javascript:;"}},[i("div",{staticClass:"pic-container",style:t.rect,on:{click:t.triggerMethod}},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.picPath,expression:"picPath"}],staticClass:"live-cover",attrs:{src:t._f("picPathFormat")(t.picPath),alt:""},on:{error:t.altImg}})])]):t._e(),0===t.type&&t.picPath?i("a",{attrs:{href:"javascript:;"}},[i("div",{staticClass:"pic-container",style:t.rect,on:{click:t.triggerMethod}},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.picPath,expression:"picPath"}],staticClass:"live-cover",attrs:{width:"100%",src:t._f("picPathFormat")(t.picPath),alt:""},on:{error:t.altImg}})])]):t._e(),t.liveInfo?i("video-control",{ref:"vod",attrs:{path:t.livePath,type:t.liveInfo.liveType,topwidth:t.topWidth,topHeight:t.topHeight,radiocover:t.radioCover,toplist:t.liveInfo.topUser,lrcpath:t.liveInfo.msgFilePath,isLive:t.isLive}}):t._e()],1)},r=[],a=(i("96cf"),i("3b8d")),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isReview,expression:"isReview"}],staticClass:"video-container",style:{height:t.topHeight},attrs:{id:"container"}},["800px"===t.topHeight?i("div",{directives:[{name:"show",rawName:"v-show",value:!t.visibility,expression:"!visibility"}],staticClass:"info-header"},[i("div",{style:{width:t.topwidth}},[i("div",[i("p",{on:{click:t.toggleTopList}},[t._v("\n          贡献榜\n          "),i("i",{staticClass:"el-icon-arrow-right"})])]),i("span")])]):t._e(),i("top-list",{directives:[{name:"show",rawName:"v-show",value:t.visibility,expression:"visibility"}],attrs:{topHeight:t.topHeight,topWidth:t.topwidth,topList:t.topList},on:{getuserinfo:t.getUserInfo,togglevisibility:t.toggleTopList}}),t.barrageList.barrages[0]?i("Barrages",{directives:[{name:"show",rawName:"v-show",value:"800px"===t.topHeight,expression:"topHeight==='800px'"}],attrs:{topWidth:t.topwidth,barrages:t.barrages}}):t._e(),i("radio-cover",{attrs:{type:t.type,topWidth:t.topwidth,radiocover:t.radiocover}}),t.showInfo?i("div",{on:{click:function(e){t.showInfo=!t.showInfo}}},[i("popup-info",{staticStyle:{color:"#000"},attrs:{info:t.userInfo}})],1):t._e(),i("div",{style:{width:t.topwidth,height:t.topHeight},attrs:{id:"player"}},[i("div",{attrs:{id:"ali-video"}})])],1)},o=[],c=i("e814"),l=i.n(c),p=(i("20d6"),i("f499")),h=i.n(p),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return 2===t.type?i("div",{staticClass:"live-pic"},[i("div",{style:{width:t.topWidth}},[i("el-carousel",{attrs:{"indicator-position":"none",arrow:"never",height:"700px"}},t._l(t.radiocover,function(t){return i("el-carousel-item",{key:t},[i("img",{attrs:{src:"http://source.48.cn"+t,alt:""}})])}),1)],1)]):t._e()},d=[],v={props:["type","topWidth","radiocover"]},f=v,g=(i("dd54"),i("2877")),m=Object(g["a"])(f,u,d,!1,null,"56517c7f",null),b=m.exports,y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return"800px"===t.topHeight?i("div",{staticClass:"top-container"},[i("div",{staticClass:"top-list",style:{width:t.topWidth}},[i("div",{staticClass:"header"},[i("span"),i("h3",[t._v("贡献榜")]),i("span",{staticClass:"close",on:{click:t.toggleTopList}},[t._v("×")])]),t._l(t.topList,function(e,s){return i("div",{key:s,staticClass:"top-item",class:{" flex-all-center":0!==s}},[i("span",{class:{"flex-align-center":0!==s,isTheTop:0===s}},[i("span",{staticClass:"top-avatar"},[i("img",{attrs:{src:t._f("picPathFormat")(e.userAvatar),alt:"",width:"40",height:"40"},on:{click:function(i){return t.getUserInfo(e)}}})]),i("br"),i("span",{staticClass:"top-name",domProps:{innerHTML:t._s(e.userName)}})]),i("br"),i("span",{staticClass:"top-money",domProps:{innerHTML:t._s("贡献度："+e.money)}})])})],2)]):t._e()},w=[],L={props:["topWidth","topList","topHeight"],methods:{toggleTopList:function(){this.$emit("togglevisibility")},getUserInfo:function(t){this.$emit("getuserinfo",t)}}},_=L,C=(i("5724"),Object(g["a"])(_,y,w,!1,null,"325f60bc",null)),x=C.exports,I=i("8050"),P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"barrage-container"},[i("div",{ref:"bs",staticClass:"barrage-list",style:{width:t.topWidth}},t._l(t.barrages,function(e,s){return i("div",{key:s,staticClass:"barrage-item"},[i("div",{class:{"sender-name":e.name},domProps:{innerHTML:t._s(e.name)}}),i("div",{class:{"sender-content":e.name},domProps:{innerHTML:t._s(e.content)}})])}),0)])},H=[],T={props:["topWidth","barrages"],updated:function(){this.$refs.bs.scrollTop=this.$refs.bs.scrollHeight}},k=T,O=(i("df16"),Object(g["a"])(k,P,H,!1,null,"23f4988e",null)),$=O.exports,j={name:"videoControl",data:function(){return{isReview:!1,barrageList:{barrages:[],times:[]},barrages:[],topList:[],visibility:!1,showInfo:!1,userInfo:{},player:{},playerOptions:{id:"ali-video",width:"100%",height:"100%",source:"",autoplay:!0,enableStashBufferForFlv:!1},originBarrageList:{barrages:[],times:[]},streamsIndex:0}},props:["path","type","topwidth","radiocover","toplist","lrcpath","topHeight","isLive"],methods:{playReview:function(){var t=this;if(this.player={},0===this.type)return this.$message.error("直播还未开始");this.playerOptions.source=this.path[this.streamsIndex].streamPath,this.playerOptions.isLive=this.isLive,this.player=new Aliplayer(this.playerOptions),this.player.on("ready",function(){t.loadedDataHandler()}),this.player.on("error",function(){t.$message.error("无法播放")}),this.player.on("timeupdate",function(){t.isReview&&0!==t.barrageList.times.length&&t.barrageHandler()}),this.player.on("completeSeek",function(){if(t.barrageList.times[0]){t.barrageList=JSON.parse(h()(t.originBarrageList));var e=t.barrageList.times.findIndex(function(e){return l()(e)>=t.player.getCurrentTime()});t.barrageList.barrages=t.barrageList.barrages.slice(e,t.barrageList.barrages.length-1),t.barrageList.times=t.barrageList.times.slice(e,t.barrageList.times.length-1),t.barrages=[],t.barrageHandler()}})},loadBarrages:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.lrcpath){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.ajax("/getBarrages",{url:this.lrcpath},"POST");case 4:e=t.sent,this.barrageList=e,this.originBarrageList=JSON.parse(h()(e));case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),toggleTopList:function(){this.visibility=!this.visibility},getUserInfo:function(t){this.userInfo=t,this.showInfo=!0},barrageHandler:function(){this.player.getCurrentTime()>=this.barrageList.times[0]&&(10===this.barrages.length?(this.barrages.shift(),this.barrages.push(this.barrageList.barrages[0])):this.barrages.push(this.barrageList.barrages[0]),this.barrageList.times.shift(),this.barrageList.barrages.shift())},loadedDataHandler:function(){this.isReview=!0,this.topList=this.toplist,this.player.play()&&this.player.play(),this.loadBarrages()}},components:{popupInfo:I["a"],topList:x,radioCover:b,Barrages:$}},M=j,S=(i("919f"),Object(g["a"])(M,n,o,!1,null,"ffa53022",null)),N=S.exports,W={name:"livepage",data:function(){return{id:this.$route.params.id,liveInfo:{},picPath:"",count:{praise:0,comment:0,share:0},radioCover:[],topWidth:"",topHeight:""}},methods:{getLive:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.picPath=JSON.parse(localStorage.getItem("type")).cover,0!==this.type){t.next=8;break}return t.next=4,this.ajax("/getOpenPage",{id:this.id});case 4:e=t.sent,this.liveInfo=e.content,t.next=13;break;case 8:return t.next=10,this.ajax("/getLivePage",{id:this.id});case 10:i=t.sent,this.liveInfo=i.content,this.liveInfo.carousels&&(this.radioCover=this.liveInfo.carousels.carousels);case 13:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),altImg:function(){this.picPath="/"},triggerMethod:function(){this.topWidth=this.rect.width,this.topHeight=this.rect.height,this.$refs.vod.playReview()}},created:function(){this.getLive()},components:{videoControl:N},computed:{livePath:function(){return[{streamPath:this.liveInfo.playStreamPath}]},type:function(){return this.$route.params.type||JSON.parse(localStorage.getItem("type")).type},isLive:function(){return!this.liveInfo.review},rect:function(){return 0===this.type?{width:"900px",height:"540px"}:{width:"450px",height:"800px"}}}},R=W,A=(i("7cb9"),Object(g["a"])(R,s,r,!1,null,"e1b0eae2",null));e["default"]=A.exports},"919f":function(t,e,i){"use strict";var s=i("3178"),r=i.n(s);r.a},ca06:function(t,e,i){},cd1c:function(t,e,i){var s=i("e853");t.exports=function(t,e){return new(s(t))(e)}},dd54:function(t,e,i){"use strict";var s=i("5403"),r=i.n(s);r.a},df16:function(t,e,i){"use strict";var s=i("0737"),r=i.n(s);r.a},e7bd:function(t,e,i){},e853:function(t,e,i){var s=i("d3f4"),r=i("1169"),a=i("2b4c")("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),s(e)&&(e=e[a],null===e&&(e=void 0))),void 0===e?Array:e}}}]);
//# sourceMappingURL=chunk-834c5700.83141d26.js.map