(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-670d2827"],{"2cb6":function(e,t,s){"use strict";var n=s("eede"),r=s.n(n);r.a},5388:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:!this.$store.getters.checkLogin,expression:"!this.$store.getters.checkLogin"}],staticClass:"logo"},[n("img",{attrs:{src:s("64bb"),alt:""}}),n("p",{staticClass:"brand"},[e._v("口袋48")])]),this.$store.getters.checkLogin?n("div",{staticClass:"user-info my-card"},[n("img",{attrs:{title:"点击查看更多信息",src:e._f("picPathFormat")(e.userInfo.avatar),alt:""},on:{click:e.getRecommend}}),n("div",{staticClass:"check"},[n("el-button",{attrs:{type:e.type,size:"mini",disabled:e.checkFlag},domProps:{innerHTML:e._s(e.txt)},on:{click:e.getCheck}})],1),n("div",{staticClass:"extra-info"},[n("p",[n("span",{staticClass:"user-name",domProps:{innerHTML:e._s(e.userInfo.nickName)}}),n("el-tag",{attrs:{size:"mini"},domProps:{innerHTML:e._s("lv."+e.userInfo.level)}})],1),n("p",{domProps:{innerHTML:e._s("ID: "+e.userInfo.userId)}})])]):n("div",{staticClass:"login-container"},[n("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{"status-icon":"","label-position":"top","label-width":"100px"}},[n("el-form-item",{attrs:{label:"手机："}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.account,callback:function(t){e.account=t},expression:"account"}})],1),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("el-form-item",{staticClass:"button"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("登录")]),n("el-button",[e._v("重置")])],1)],1)],1)])},r=[],o=s("cebc"),a=s("f499"),i=s.n(a),c=(s("96cf"),s("3b8d")),u=s("2f62"),l={name:"login",data:function(){return{account:"",password:"",token:"",friends:[],userInfo:this.$store.getters.getUserInfo,type:"danger",checkFlag:!1,txt:"打卡",logFlag:this.$store.getters.checkLogin,showInfo:!1,recommendInfo:!1}},methods:{login:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!localStorage.getItem("userinfo")){e.next=8;break}t=JSON.parse(localStorage.getItem("userinfo")),this.$store.commit("saveUserInfo",t.userInfo),this.token=t.token,this.$store.commit("setToken",t.token),this.friends=t.friends,e.next=25;break;case 8:return e.next=10,this.ajax("/login",{account:this.account,password:this.password},"POST");case 10:if(s=e.sent,1001003!==s.status){e.next=13;break}return e.abrupt("return",this.$message.error(s.message));case 13:this.password="",this.account="",this.userInfo=s.content.userInfo,this.$store.commit("saveUserInfo",s.content.userInfo),this.token=s.content.token,this.$store.commit("setToken",s.content.token),this.logFlag=!0,localStorage.setItem("isLogin",i()({logFlag:this.logFlag})),this.friends=s.content.friends,localStorage.setItem("userinfo",i()(s.content)),this.$message("登陆成功，3秒后刷新"),setTimeout(function(){window.location.reload()},3e3);case 25:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),check:function(){if(localStorage.getItem("isLogin")){var e=(new Date).toDateString(),t=JSON.parse(localStorage.getItem("isLogin"));t.date&&t.date===e?(this.checkFlag=!0,this.txt="已打卡"):this.checkFlag=!1}},getCheck:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.ajax("/getCheck",{token:this.$store.state.token},"POST");case 2:if(t=e.sent,200!==t.status&&1001006!==t.status){e.next=13;break}s=JSON.parse(localStorage.getItem("isLogin")),s.checkFlag=!0,s.date=(new Date).toDateString(),localStorage.setItem("isLogin",i()(s)),this.checkFlag=!0,this.txt="已打卡",this.$message(t.message),e.next=14;break;case 13:return e.abrupt("return",this.$message.error("请稍后再试"));case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getRecommend:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$router.push({name:"userinfo",params:{id:this.userInfo.userId}});case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this.check()},computed:Object(o["a"])({},Object(u["c"])(["jujuInfo"]))},h=l,m=(s("2cb6"),s("2877")),g=Object(m["a"])(h,n,r,!1,null,"1330a58e",null);t["default"]=g.exports},eede:function(e,t,s){}}]);
//# sourceMappingURL=chunk-670d2827.080c1992.js.map